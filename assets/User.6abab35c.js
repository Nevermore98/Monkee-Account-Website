var x=Object.defineProperty,C=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(e,s,t)=>s in e?x(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,f=(e,s)=>{for(var t in s||(s={}))F.call(s,t)&&v(e,t,s[t]);if(m)for(var t of m(s))I.call(s,t)&&v(e,t,s[t]);return e},h=(e,s)=>C(e,B(s));import{a as w}from"./axios.9c966455.js";import{E as U,r as V,u as j,o as z,Q as N,G as A,a as r,b as E,g as y,f as o,O as S,h as D,d as n,w as i,q as O,K as q,M,e as R}from"./vendor.c046acaf.js";import{_ as T}from"./index.4a90c7e5.js";const G={name:"User",setup(){const e=U({id:0,username:"",signature:""}),s=V(!1),t=j();z(async()=>{g()});const a=N(()=>e.username.slice(0,1).toUpperCase()+e.username.slice(1)),g=async()=>{const{data:u}=await w.get("/user/get_userinfo");try{Object.assign(e,u)}catch(_){console.log(_)}},p=async()=>{const{data:u}=await w.post("/user/edit_signature",{signature:e.signature});Object.assign(e,u),O.success("\u4FEE\u6539\u6210\u529F")},c=()=>{localStorage.removeItem("token"),t.push({path:"/login"})};return h(f({},A(e)),{beautifyName:a,isShowSignature:s,confirmSignature:p,logout:c})}},d=e=>(q("data-v-76107789"),e=e(),M(),e),K={class:"user"},P={class:"head"},Q=d(()=>o("img",{class:"avatar",src:"https://nevermore-picbed-1304219157.cos.ap-guangzhou.myqcloud.com/cat%26duck.jpg"},null,-1)),H={class:"info"},J={class:"name"},L={key:0,class:"signature"},W={class:"content"},X=d(()=>o("div",{class:"icon-wrap"},[o("svg",{class:"icon"},[o("use",{"xlink:href":"#icon-edit"})])],-1)),Y=d(()=>o("div",{class:"icon-wrap"},[o("svg",{class:"icon"},[o("use",{"xlink:href":"#icon-modify-password"})])],-1)),Z=d(()=>o("div",{class:"icon-wrap"},[o("svg",{class:"icon"},[o("use",{"xlink:href":"#icon-about"})])],-1)),$={class:"btn-wrap"},ee=R("\u9000\u51FA\u767B\u5F55");function se(e,s,t,a,g,p){const c=r("van-cell"),u=r("van-cell-group"),_=r("van-field"),k=r("van-dialog"),b=r("van-button");return E(),y("div",K,[o("div",P,[Q,o("div",H,[o("div",J,S(a.beautifyName||""),1),e.signature?(E(),y("span",L,S(e.signature||""),1)):D("",!0)])]),o("div",W,[n(u,null,{default:i(()=>[n(c,{icon:"edit",onClick:s[0]||(s[0]=l=>a.isShowSignature=!0),title:"\u4FEE\u6539\u4E2A\u6027\u7B7E\u540D","is-link":"",size:"large"},{icon:i(()=>[X]),_:1}),n(c,{icon:"setting-o",title:"\u4FEE\u6539\u5BC6\u7801",to:"/modifyPassword","is-link":"",size:"large"},{icon:i(()=>[Y]),_:1}),n(c,{icon:"smile-o",to:"/about",title:"\u5173\u4E8E\u9879\u76EE","is-link":"",size:"large"},{icon:i(()=>[Z]),_:1})]),_:1})]),n(k,{show:a.isShowSignature,"onUpdate:show":s[2]||(s[2]=l=>a.isShowSignature=l),onConfirm:a.confirmSignature,title:"\u4E2A\u6027\u7B7E\u540D","show-cancel-button":""},{default:i(()=>[n(_,{modelValue:e.signature,"onUpdate:modelValue":s[1]||(s[1]=l=>e.signature=l),rows:"2",autosize:"",type:"textarea",maxlength:"20",placeholder:"\u8BF7\u8F93\u5165\u4E2A\u6027\u7B7E\u540D","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["show","onConfirm"]),o("div",$,[n(b,{class:"logout",type:"danger",size:"large",onClick:a.logout},{default:i(()=>[ee]),_:1},8,["onClick"])])])}var ie=T(G,[["render",se],["__scopeId","data-v-76107789"]]);export{ie as default};
