import{V as x,u as b,E as F,r as C,o as H,a as l,b as o,g as n,d as i,f as t,H as j,O as m,w as h,c as B,h as w,F as A,z as E,q as N,K as R,M,e as y}from"./vendor.c046acaf.js";import{H as P}from"./Header.ac8caaef.js";import{d as S,t as g}from"./index.af296ac2.js";import{a as k}from"./axios.9c966455.js";import{P as V}from"./PopAdd.f35ae0ce.js";import{_ as I}from"./index.4a90c7e5.js";const Y={name:"Detail",components:{Header:P,PopAdd:V},setup(){const s=x(),c=b(),{id:_}=s.query,e=F({}),f=C(null);H(async()=>{u()});const u=async()=>{const{data:a}=await k.get(`/bill/detail?id=${_}`);console.log(a);try{Object.assign(e,a)}catch(d){console.log(d)}};return{dayjs:S,detail:e,typeMap:g,deleteDetail:()=>{E.confirm({message:"\u5220\u9664\u540E\u65E0\u6CD5\u6062\u590D\uFF0C\u662F\u5426\u5220\u9664\uFF1F"}).then(async()=>{await k.post("/bill/delete",{id:_}),N.success("\u5220\u9664\u6210\u529F"),setTimeout(()=>{c.push("/")},200)}).catch(()=>{})},getDetail:u,getHref:a=>{var r;return`#icon-${(r=g[a.type_id])==null?void 0:r.icon}`},popAddRef:f}}},D=s=>(R("data-v-4a9b2906"),s=s(),M(),s),O={key:0,class:"detail"},T={class:"card"},q={class:"type-wrap"},z={class:"icon"},K=["xlink:href"],G={class:"type-name"},J={key:0,class:"amount expense"},L={key:1,class:"amount income"},Q={class:"info"},U={class:"operation van-hairline--top"},W=D(()=>t("svg",{class:"icon operation-icon"},[t("use",{"xlink:href":"#icon-delete"})],-1)),X=y(" \u5220\u9664 "),Z=D(()=>t("svg",{class:"icon operation-icon"},[t("use",{"xlink:href":"#icon-edit"})],-1)),$=y(" \u7F16\u8F91 "),ee={key:1};function te(s,c,_,e,f,u){const v=l("Header"),p=l("van-field"),a=l("van-button"),d=l("PopAdd"),r=l("van-skeleton");return o(),n(A,null,[i(v,{title:"\u8D26\u5355\u8BE6\u60C5"}),Object.keys(e.detail).length?(o(),n("div",O,[t("div",T,[t("div",q,[t("span",{class:j([{expense:e.detail.pay_type===1,income:e.detail.pay_type===2},"icon-wrap"])},[(o(),n("svg",z,[t("use",{"xlink:href":e.getHref(e.detail)},null,8,K)]))],2),t("span",G,m(e.detail.type_name||""),1)]),e.detail.pay_type===1?(o(),n("div",J," -"+m(e.detail.amount),1)):(o(),n("div",L,"+"+m(e.detail.amount),1)),t("div",Q,[i(p,{label:"\u8BB0\u5F55\u65F6\u95F4","model-value":e.dayjs(Number(e.detail.date)).format("YYYY\u6708MM\u65E5DD HH:mm"),readonly:""},null,8,["model-value"]),i(p,{label:"\u5907\u6CE8","model-value":e.detail.remark||"-",readonly:""},null,8,["model-value"])]),t("div",U,[i(a,{onClick:e.deleteDetail,class:"delete-button"},{default:h(()=>[W,X]),_:1},8,["onClick"]),i(a,{onClick:c[0]||(c[0]=ae=>e.popAddRef.isShowAdd=!0),class:"edit-button"},{default:h(()=>[Z,$]),_:1})]),e.detail.id?(o(),B(d,{key:2,ref:"popAddRef",initData:e.detail,onRefresh:e.getDetail},null,8,["initData","onRefresh"])):w("",!0)])])):(o(),n("div",ee,[i(r,{title:"",row:3})]))],64)}var de=I(Y,[["render",te],["__scopeId","data-v-4a9b2906"]]);export{de as default};
