import{H as w}from"./Header.ac8caaef.js";import{r as l,u as B,a as t,b,g as E,d as a,w as p,q as c,f as C,e as F}from"./vendor.c046acaf.js";import{a as y}from"./axios.9c966455.js";import{_ as P}from"./index.4a90c7e5.js";const V={components:{Header:w},setup(){const s=l(""),o=l(""),u=l(""),e=l(!1),_=l(""),v=B();return{oldPassword:s,newPassword:o,repeatPassword:u,errorMessage:_,comparePassword:()=>{_.value=o.value===u.value?"":"\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4",e.value=o.value===u.value},submitModify:()=>{var n;if(o.value!==u.value){c.fail("\u65B0\u5BC6\u7801\u4E0D\u4E00\u81F4");return}if(!s.value.trim()||!((n=o.value)==null?void 0:n.trim())){c.fail("\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A");return}if(o.value=s.value){c.fail("\u65B0\u5BC6\u7801\u4E0E\u65E7\u5BC6\u7801\u76F8\u540C");return}try{const{data:i,code:f}=y.post("/user/modify_pass",{old_pass:s.value,new_pass:o.value,new_pass2:u.value});f!==400&&(c.success("\u4FEE\u6539\u6210\u529F"),setTimeout(()=>{v.push("/user")},300))}catch(i){console.log(i)}},isConsistent:e}}},g={class:"edit"},x={class:"edit-wrap"},M=F(" \u63D0\u4EA4\u4FEE\u6539 ");function D(s,o,u,e,_,v){const m=t("Header"),d=t("van-field"),n=t("van-cell-group"),i=t("van-button"),f=t("van-form");return b(),E("div",g,[a(m,{title:"\u4FEE\u6539\u5BC6\u7801"}),a(m,{title:"\u4FEE\u6539\u5BC6\u7801"}),a(f,{onSubmit:e.submitModify},{default:p(()=>[C("div",x,[a(n,{inset:""},{default:p(()=>[a(d,{modelValue:e.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=r=>e.oldPassword=r),type:"password",label:"\u539F\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u539F\u5BC6\u7801",clearable:"",autocomplete:"off"},null,8,["modelValue"]),a(d,{modelValue:e.newPassword,"onUpdate:modelValue":o[1]||(o[1]=r=>e.newPassword=r),type:"password",label:"\u65B0\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",clearable:"",autocomplete:"off"},null,8,["modelValue"]),a(d,{modelValue:e.repeatPassword,"onUpdate:modelValue":o[2]||(o[2]=r=>e.repeatPassword=r),type:"password",label:"\u786E\u8BA4\u5BC6\u7801",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u65B0\u5BC6\u7801",onBlur:e.comparePassword,"error-message":e.errorMessage,disabled:!e.newPassword,clearable:"",autocomplete:"off"},null,8,["modelValue","onBlur","error-message","disabled"])]),_:1})]),a(i,{round:"",block:"",type:"primary",color:"#39be77",onClick:e.submitModify,disabled:!e.isConsistent},{default:p(()=>[M]),_:1},8,["onClick","disabled"])]),_:1},8,["onSubmit"])])}var j=P(V,[["render",D],["__scopeId","data-v-25f4487e"]]);export{j as default};
